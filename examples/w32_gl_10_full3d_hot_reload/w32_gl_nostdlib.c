#include "../../w32_gl.h"        /* Everything needed for Windows window/screen/opengl/mouse initialization */
#include "../w32_open_gl_func.h" /* Load OpenGl functions not directly provided by windows (e.g. OPEN_GL_VERSION > 1.1) */

/* The platform independent nostdlib application code/logic */
#define SPEG_IMPORT
#include "speg.h"

typedef struct w32_type_llu
{
  unsigned long low_part;
  unsigned long high_part;
} w32_type_llu;

double w32_type_llu_to_double(w32_type_llu a)
{
  return ((double)a.high_part * 4294967296.0 + (double)a.low_part);
}

unsigned long w32_rdtsc(void)
{
  w32_type_llu rdtsc_value = {0};
  __asm __volatile("rdtsc" : "=a"(rdtsc_value.low_part), "=d"(rdtsc_value.high_part));
  return ((unsigned long)w32_type_llu_to_double(rdtsc_value));
}

static bool globalRunning = true;
static bool globalPause = false;
static bool vsync = true;
static bool wireframeMode = false;

static int width = 800;
static int height = 600;
static double dt = 0.0;
HWND window;

static unsigned int drawCallsPerFrame = 0;
static int occludedObjectsPerFrame = 0;

typedef struct File
{
  uint32_t size;
  char *content;
} File;

File w32_read_entire_file(const char *path)
{
  File tmp = {0};

  HANDLE hFile;
  DWORD fileSize, bytesRead;
  char *buffer;

  hFile = CreateFileA(path, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
  if (hFile == INVALID_HANDLE_VALUE)
  {
    win32_print_console("[win32] invalid handle for file %s. Waiting shortly before retry!\n", path);
    Sleep(10);
    hFile = CreateFileA(path, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    if (hFile == INVALID_HANDLE_VALUE)
    {
      win32_print_console("[win32] invalid handle for second retry for file %s\n", path);
      assert(hFile == INVALID_HANDLE_VALUE);
      return tmp;
    }
  }

  fileSize = GetFileSize(hFile, NULL);
  if (fileSize == INVALID_FILE_SIZE)
  {
    CloseHandle(hFile);
    return tmp;
  }

  buffer = (char *)HeapAlloc(GetProcessHeap(), 0, fileSize + 1); /* +1 for null terminator */
  if (!buffer)
  {
    CloseHandle(hFile);
    return tmp;
  }

  if (!ReadFile(hFile, buffer, fileSize, &bytesRead, NULL) || bytesRead != fileSize)
  {
    HeapFree(GetProcessHeap(), 0, buffer);
    CloseHandle(hFile);
    return tmp;
  }

  buffer[fileSize] = '\0';
  tmp.size = fileSize;
  tmp.content = buffer;

  CloseHandle(hFile);

  return tmp;
}

static const FILETIME empty = {0, 0};
FILETIME w32_file_mod_time(const char *file)
{
  WIN32_FILE_ATTRIBUTE_DATA fad;
  return GetFileAttributesExA(file, GetFileExInfoStandard, &fad) ? fad.ftLastWriteTime : empty;
}

typedef struct speg_shader
{
  unsigned int program;
  FILETIME vsTime;
  FILETIME fsTime;
  char *vsFile;
  char *fsFile;
} speg_shader;

typedef struct speg_shaders
{

  speg_shader instanced;

} speg_shaders;

static speg_shaders shaders;

unsigned int shader_compile(const char *shaderCode, GLenum shaderType)
{

  unsigned int shaderId = glCreateShader(shaderType);
  glShaderSource(shaderId, 1, &shaderCode, NULL);
  glCompileShader(shaderId);

  int success;
  glGetShaderiv(shaderId, GL_COMPILE_STATUS, &success);

  if (!success)
  {
    char infoLog[1024];
    glGetShaderInfoLog(shaderId, 1024, NULL, infoLog);
    win32_printf(infoLog);
  }

  return shaderId;
}

speg_shader shader_load(char *vertexShaderFile, char *fragmentShaderFile)
{
  speg_shader result;
  char *vertexShaderCode;
  char *fragmentShaderCode;
  unsigned int vertexShader;
  unsigned int fragmentShader;
  unsigned int shaderProgram;
  int success;

  win32_print_console("[win32] load and compile shaders: %s, %s\n", vertexShaderFile, fragmentShaderFile);

  result.vsTime = w32_file_mod_time(vertexShaderFile);
  result.fsTime = w32_file_mod_time(fragmentShaderFile);
  result.vsFile = vertexShaderFile;
  result.fsFile = fragmentShaderFile;

  vertexShaderCode = w32_read_entire_file(vertexShaderFile).content;
  fragmentShaderCode = w32_read_entire_file(fragmentShaderFile).content;

  vertexShader = shader_compile(vertexShaderCode, GL_VERTEX_SHADER);
  fragmentShader = shader_compile(fragmentShaderCode, GL_FRAGMENT_SHADER);

  HeapFree(GetProcessHeap(), 0, vertexShaderCode);
  HeapFree(GetProcessHeap(), 0, fragmentShaderCode);

  shaderProgram = glCreateProgram();
  glAttachShader(shaderProgram, vertexShader);
  glAttachShader(shaderProgram, fragmentShader);
  glLinkProgram(shaderProgram);

  glGetProgramiv(shaderProgram, GL_LINK_STATUS, &success);

  if (!success)
  {
    char infoLog[1024];
    glGetProgramInfoLog(shaderProgram, 1024, NULL, infoLog);
    win32_printf(infoLog);
  }

  glDeleteShader(vertexShader);
  glDeleteShader(fragmentShader);

  result.program = shaderProgram;

  return (result);
}

void shader_load_all(void)
{
  shaders.instanced = shader_load("test_instanced.vs", "test_instanced.fs");
}

static const int sizeVec2 = sizeof(float) * 2;
static const int sizeVec3 = sizeof(float) * 3;
static const int sizeM4x4 = sizeof(float) * 16;

static bool initialized_gl = false;
static GLint uniformLocationProjectionView = -1;
static GLint uniformLocationAtlasTexture = -1;
static GLint uniformLocationAtlasRows = -1;
static GLint uniformLocationAtlasColumns = -1;
static GLuint font_texture;

static unsigned char font_atlas[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x00, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF8, 0x01, 0xE0, 0x07, 0xE0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x00, 0x00, 0x00, 0x70, 0x0F, 0xC0, 0xF0, 0xFF, 0x00, 0x07, 0x80, 0x00, 0x3C, 0x03, 0xC0, 0x00, 0x1C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x03, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x3C, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xF8, 0x00, 0x00, 0x3C, 0x00, 0x00, 0xF8, 0x00, 0x07, 0xC0, 0xF0, 0x00, 0x1F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xF8, 0x01, 0xE0, 0x07, 0xF0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x00, 0x00, 0x00, 0xF0, 0x1F, 0xE1, 0xE1, 0xFF, 0x80, 0x07, 0x80, 0x00, 0x7C, 0x03, 0xE0, 0x00, 0x1C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xC0, 0x07, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x3C, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xC0, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x1F, 0xF8, 0x00, 0x00, 0x3C, 0x00, 0x00, 0xF8, 0x00, 0x07, 0xC0, 0xF0, 0x00, 0x1F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xF8, 0x01, 0xE0, 0x07, 0xF8, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x1C, 0x78, 0x0F, 0xFE, 0x3F, 0xE3, 0xC1, 0xFF, 0x80, 0x07, 0x80, 0x00, 0xF8, 0x01, 0xF0, 0x01, 0x9C, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x07, 0xF8, 0x00, 0xFC, 0x00, 0xFF, 0x80, 0x7F, 0xE0, 0x00, 0xFC, 0x07, 0xFF, 0x80, 0x1F, 0xE1, 0xFF, 0xFC, 0x0F, 0xFC, 0x03, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xE0, 0x0F, 0x9F, 0x00, 0xFC, 0x03, 0xFF, 0x80, 0x0F, 0xFC, 0x7F, 0xF0, 0x07, 0xFF, 0x81, 0xFF, 0xE0, 0x0F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x81, 0xFF, 0xC0, 0xF0, 0x7C, 0x1E, 0x00, 0x1F, 0x03, 0xC7, 0xC0, 0x70, 0x1F, 0xE0, 0x3F, 0xF8, 0x01, 0xFE, 0x03, 0xFF, 0x80, 0x3F, 0xF8, 0x7F, 0xFF, 0x9E, 0x01, 0xCF, 0x00, 0x3F, 0xC0, 0x0E, 0xF8, 0x0F, 0xBC, 0x01, 0xF3, 0xFF, 0xF0, 0x1C, 0x00, 0x1E, 0x00, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x03, 0xE0, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x3F, 0xF8, 0x00, 0x00, 0x3C, 0x00, 0x00, 0xF8, 0x00, 0x07, 0xC0, 0xF0, 0x00, 0x1F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x1C, 0x70, 0x1F, 0xFE, 0x3C, 0xE3, 0xC3, 0xE7, 0xC0, 0x07, 0x80, 0x01, 0xF0, 0x00, 0xF0, 0x03, 0xFD, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0xFC, 0x01, 0xFC, 0x01, 0xFF, 0xC0, 0x7F, 0xF0, 0x00, 0xFC, 0x07, 0xFF, 0x80, 0x7F, 0xE1, 0xFF, 0xFC, 0x1F, 0xFE, 0x07, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xF0, 0x1E, 0x07, 0x80, 0xFC, 0x03, 0xFF, 0xE0, 0x3F, 0xFC, 0x7F, 0xFC, 0x07, 0xFF, 0x81, 0xFF, 0xE0, 0x3F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x81, 0xFF, 0xC0, 0xF0, 0x7C, 0x1E, 0x00, 0x1F, 0x07, 0xC7, 0xE0, 0x70, 0x7F, 0xF8, 0x3F, 0xFE, 0x07, 0xFF, 0x83, 0xFF, 0xC0, 0x7F, 0xF8, 0x7F, 0xFF, 0x9E, 0x01, 0xCF, 0x00, 0x7F, 0xC0, 0x0E, 0x7C, 0x0F, 0x3E, 0x01, 0xE3, 0xFF, 0xF0, 0x1C, 0x00, 0x1E, 0x00, 0x00, 0x1E, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x78, 0x00, 0x07, 0xC0, 0xF0, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x1C, 0x70, 0x3F, 0xFE, 0x38, 0xE7, 0x83, 0xC3, 0xC0, 0x07, 0x80, 0x01, 0xE0, 0x00, 0x78, 0x03, 0xFF, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x1F, 0xFE, 0x07, 0xFC, 0x03, 0xFF, 0xC0, 0x7F, 0xF0, 0x01, 0xFC, 0x07, 0xFF, 0x80, 0xFF, 0xE1, 0xFF, 0xFC, 0x3F, 0xFE, 0x0F, 0xFF, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0xF0, 0x3C, 0x07, 0x81, 0xFC, 0x03, 0xFF, 0xE0, 0x7F, 0xFC, 0x7F, 0xFE, 0x07, 0xFF, 0x81, 0xFF, 0xE0, 0x7F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x81, 0xFF, 0xC0, 0xF0, 0xF8, 0x1E, 0x00, 0x1F, 0x87, 0xC7, 0xE0, 0x70, 0xFF, 0xF8, 0x3F, 0xFE, 0x0F, 0xFF, 0x83, 0xFF, 0xE0, 0xFF, 0xF8, 0x7F, 0xFF, 0x9E, 0x01, 0xCF, 0x80, 0x7B, 0xC0, 0x0E, 0x3C, 0x1F, 0x1E, 0x03, 0xE3, 0xFF, 0xF0, 0x1C, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x1C, 0x70, 0x3C, 0xE6, 0x3C, 0xEF, 0x03, 0xC3, 0xC0, 0x07, 0x80, 0x03, 0xC0, 0x00, 0x7C, 0x00, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x3E, 0x1F, 0x0F, 0xFC, 0x03, 0xC3, 0xE0, 0x40, 0xF8, 0x03, 0xFC, 0x07, 0x00, 0x01, 0xF8, 0x00, 0x00, 0x3C, 0x3C, 0x1F, 0x0F, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x01, 0xF0, 0x00, 0x00, 0x78, 0x3C, 0x03, 0x81, 0xFE, 0x03, 0xC1, 0xF0, 0x7C, 0x0C, 0x78, 0x3F, 0x07, 0x00, 0x01, 0xE0, 0x00, 0xFC, 0x0C, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF1, 0xF0, 0x1E, 0x00, 0x1F, 0x8F, 0xE7, 0xF0, 0x70, 0xF8, 0x7C, 0x3C, 0x1F, 0x0F, 0x87, 0xC3, 0xC3, 0xE0, 0xF0, 0x00, 0x01, 0xE0, 0x1E, 0x01, 0xC7, 0x80, 0x7B, 0xC0, 0x0E, 0x3E, 0x1E, 0x1F, 0x03, 0xC0, 0x01, 0xE0, 0x1C, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x00, 0x7F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0xF3, 0xC0, 0x3C, 0x70, 0x78, 0xE0, 0x3F, 0xEF, 0x03, 0xC7, 0x80, 0x07, 0x80, 0x03, 0xC0, 0x00, 0x3C, 0x00, 0x3F, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x3C, 0x1F, 0x0F, 0x3C, 0x01, 0x81, 0xE0, 0x00, 0x78, 0x03, 0xFC, 0x07, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x78, 0x3C, 0x0F, 0x1E, 0x07, 0xC0, 0x3E, 0x00, 0x0F, 0x80, 0x00, 0x7C, 0x00, 0x00, 0x01, 0xF8, 0x00, 0x00, 0x78, 0x78, 0x03, 0x81, 0xFE, 0x03, 0xC0, 0xF0, 0xF8, 0x00, 0x78, 0x1F, 0x07, 0x00, 0x01, 0xE0, 0x00, 0xF8, 0x00, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF3, 0xE0, 0x1E, 0x00, 0x1F, 0x8F, 0xE7, 0xF0, 0x71, 0xF0, 0x3C, 0x3C, 0x0F, 0x1F, 0x03, 0xC3, 0xC1, 0xE0, 0xF0, 0x00, 0x01, 0xE0, 0x1E, 0x01, 0xC7, 0x80, 0xF9, 0xC0, 0x0E, 0x1F, 0x3E, 0x0F, 0x87, 0xC0, 0x03, 0xE0, 0x1C, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x00, 0xF7, 0x80, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFE, 0x03, 0xDF, 0xC0, 0x0F, 0xF8, 0x07, 0xFF, 0x01, 0xFE, 0x00, 0x3C, 0x00, 0x3F, 0xFE, 0x3D, 0xFC, 0x07, 0xF8, 0x03, 0xFF, 0xC0, 0xF0, 0x7E, 0x01, 0xE0, 0x1D, 0xF7, 0xC3, 0x9F, 0xC0, 0x1F, 0xE0, 0x39, 0xFC, 0x01, 0xFF, 0xC1, 0xCF, 0xE0, 0x1F, 0xF0, 0xFF, 0xFF, 0x0F, 0x03, 0xC7, 0x80, 0x7B, 0xC0, 0x0E, 0x7C, 0x0F, 0x9E, 0x01, 0xE3, 0xFF, 0xE0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x01, 0xFF, 0xFE, 0x78, 0xE0, 0x1F, 0xFE, 0x01, 0xEF, 0x80, 0x00, 0x00, 0x07, 0x80, 0x00, 0x3C, 0x00, 0xFF, 0x80, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x78, 0x0F, 0x0E, 0x3C, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x07, 0xBC, 0x07, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x78, 0x3C, 0x0F, 0x1E, 0x03, 0xC0, 0x3F, 0x00, 0x0F, 0xC0, 0x00, 0xF8, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x78, 0x78, 0x07, 0xC3, 0xDE, 0x03, 0xC0, 0xF0, 0xF0, 0x00, 0x78, 0x0F, 0x07, 0x00, 0x01, 0xE0, 0x01, 0xF0, 0x00, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF7, 0xC0, 0x1E, 0x00, 0x1F, 0xCF, 0xE7, 0xF8, 0x71, 0xE0, 0x1E, 0x3C, 0x0F, 0x1E, 0x03, 0xE3, 0xC1, 0xE0, 0xF0, 0x00, 0x01, 0xE0, 0x1E, 0x01, 0xC7, 0xC0, 0xF1, 0xC0, 0x0E, 0x0F, 0x7C, 0x0F, 0x87, 0x80, 0x07, 0xC0, 0x1C, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x00, 0xF3, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFF, 0x83, 0xFF, 0xE0, 0x1F, 0xF8, 0x0F, 0xFF, 0x03, 0xFF, 0x00, 0x3C, 0x00, 0x7F, 0xFE, 0x3F, 0xFE, 0x07, 0xF8, 0x03, 0xFF, 0xC0, 0xF0, 0xFC, 0x01, 0xE0, 0x1F, 0xFF, 0xC3, 0xFF, 0xE0, 0x7F, 0xF8, 0x3F, 0xFE, 0x03, 0xFF, 0xC1, 0xFF, 0xF0, 0x3F, 0xF0, 0xFF, 0xFF, 0x0F, 0x03, 0xC7, 0x80, 0xFB, 0xC0, 0x0E, 0x3E, 0x1F, 0x1E, 0x03, 0xE3, 0xFF, 0xE0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x01, 0xFF, 0xFE, 0x7D, 0xE0, 0x1F, 0xFC, 0x01, 0xFF, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x03, 0xFF, 0xE0, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x78, 0x1F, 0x00, 0x3C, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x07, 0xBC, 0x07, 0x00, 0x03, 0xC0, 0x00, 0x00, 0xF0, 0x3E, 0x1F, 0x1E, 0x03, 0xC0, 0x3F, 0x00, 0x0F, 0xC0, 0x03, 0xF0, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0xF8, 0x71, 0xFD, 0xC3, 0xDF, 0x03, 0xC1, 0xE1, 0xF0, 0x00, 0x78, 0x07, 0x87, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x00, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF7, 0x80, 0x1E, 0x00, 0x1F, 0xDF, 0xE7, 0xF8, 0x71, 0xE0, 0x1E, 0x3C, 0x0F, 0x1E, 0x01, 0xE3, 0xC1, 0xE0, 0xF0, 0x00, 0x01, 0xE0, 0x1E, 0x01, 0xC3, 0xC0, 0xF1, 0xC0, 0x0E, 0x0F, 0xF8, 0x07, 0xCF, 0x80, 0x07, 0x80, 0x1C, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x01, 0xE3, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFF, 0x83, 0xFF, 0xE0, 0x3F, 0xF8, 0x1F, 0xFF, 0x07, 0xFF, 0x87, 0xFF, 0xF0, 0x7F, 0xFE, 0x3F, 0xFE, 0x07, 0xF8, 0x03, 0xFF, 0xC0, 0xF1, 0xF8, 0x01, 0xE0, 0x1F, 0xFF, 0xE3, 0xFF, 0xE0, 0xFF, 0xF8, 0x3F, 0xFE, 0x07, 0xFF, 0xC1, 0xFF, 0xF0, 0x7F, 0xF0, 0xFF, 0xFF, 0x0F, 0x03, 0xC7, 0xC0, 0xF3, 0xC0, 0x0E, 0x3E, 0x1E, 0x1F, 0x03, 0xC3, 0xFF, 0xE0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x01, 0xFF, 0xFE, 0x3F, 0xE0, 0x00, 0x3C, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x03, 0xFD, 0xE0, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x78, 0x7F, 0x80, 0x3C, 0x00, 0x01, 0xE0, 0x00, 0xF0, 0x0F, 0x3C, 0x07, 0x00, 0x03, 0x80, 0x00, 0x00, 0xF0, 0x3F, 0x3E, 0x1E, 0x03, 0xC0, 0x3F, 0x00, 0x0F, 0xC0, 0x07, 0xE0, 0x0F, 0xFF, 0xC0, 0x1F, 0x00, 0x03, 0xF8, 0xF3, 0xFD, 0xC3, 0xCF, 0x03, 0xC1, 0xE1, 0xE0, 0x00, 0x78, 0x07, 0x87, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x00, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x00, 0x1E, 0x00, 0x1D, 0xFD, 0xE7, 0xBC, 0x71, 0xE0, 0x1E, 0x3C, 0x0F, 0x1E, 0x01, 0xE3, 0xC3, 0xE0, 0xFC, 0x00, 0x01, 0xE0, 0x1E, 0x01, 0xC3, 0xC1, 0xF1, 0xC7, 0x9E, 0x07, 0xF8, 0x03, 0xCF, 0x00, 0x0F, 0x80, 0x1C, 0x00, 0x03, 0xC0, 0x00, 0x1E, 0x01, 0xC1, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x06, 0x07, 0x83, 0xF1, 0xF0, 0x7C, 0x08, 0x3E, 0x0F, 0x0F, 0x87, 0xC7, 0xFF, 0xF0, 0xF8, 0xF8, 0x3F, 0x1E, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF3, 0xF0, 0x01, 0xE0, 0x1F, 0x7D, 0xE3, 0xF1, 0xE0, 0xF8, 0x7C, 0x3F, 0x1F, 0x0F, 0x83, 0xC1, 0xF8, 0xF0, 0x78, 0x00, 0x07, 0x80, 0x0F, 0x03, 0xC3, 0xC0, 0xF1, 0xC0, 0x1E, 0x1F, 0x3E, 0x0F, 0x03, 0xC0, 0x03, 0xC0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x38, 0xF0, 0x3F, 0xE0, 0x00, 0x78, 0x01, 0xFC, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x01, 0x9C, 0xE0, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x78, 0xFF, 0x80, 0x3C, 0x00, 0x03, 0xE0, 0x1F, 0xF0, 0x1E, 0x3C, 0x07, 0xFE, 0x03, 0xFF, 0xC0, 0x01, 0xE0, 0x1F, 0xFC, 0x1F, 0x03, 0xC0, 0x1E, 0x00, 0x07, 0x80, 0x0F, 0xC0, 0x0F, 0xFF, 0xC0, 0x0F, 0xC0, 0x0F, 0xF0, 0xF7, 0xFD, 0xC7, 0x8F, 0x03, 0xFF, 0xE1, 0xE0, 0x00, 0x78, 0x07, 0x87, 0xFF, 0x81, 0xFF, 0xE1, 0xE3, 0xFC, 0x7F, 0xFF, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x00, 0x1E, 0x00, 0x1D, 0xFD, 0xE7, 0xBC, 0x73, 0xC0, 0x1E, 0x3C, 0x0F, 0x3C, 0x01, 0xE3, 0xDF, 0xE0, 0xFF, 0x80, 0x01, 0xE0, 0x1E, 0x01, 0xC3, 0xE1, 0xE1, 0xC7, 0x9E, 0x03, 0xF0, 0x03, 0xFF, 0x00, 0x1F, 0x00, 0x1C, 0x00, 0x03, 0xC0, 0x00, 0x1E, 0x03, 0xC0, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x83, 0xE0, 0xF0, 0x78, 0x00, 0x3C, 0x0F, 0x0F, 0x03, 0xC7, 0xFF, 0xF0, 0xF0, 0x78, 0x3E, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF3, 0xE0, 0x01, 0xE0, 0x1E, 0x79, 0xE3, 0xE0, 0xF1, 0xF0, 0x3C, 0x3E, 0x0F, 0x0F, 0x03, 0xC1, 0xF0, 0x70, 0x70, 0x00, 0x07, 0x80, 0x0F, 0x03, 0xC3, 0xC1, 0xE1, 0xC7, 0x9E, 0x0F, 0xFC, 0x0F, 0x07, 0x80, 0x07, 0xC0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x3C, 0x03, 0xF8, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x38, 0xF0, 0x1F, 0xF8, 0x00, 0xF8, 0x03, 0xFC, 0x70, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x00, 0x1C, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x7B, 0xFF, 0x80, 0x3C, 0x00, 0x03, 0xC0, 0x1F, 0xE0, 0x1E, 0x3C, 0x07, 0xFF, 0x03, 0xFF, 0xE0, 0x01, 0xE0, 0x0F, 0xF8, 0x0F, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x80, 0x0F, 0xFF, 0xC0, 0x07, 0xE0, 0x0F, 0xE0, 0xE7, 0xB9, 0xC7, 0x8F, 0x83, 0xFF, 0x81, 0xE0, 0x00, 0x78, 0x07, 0x87, 0xFF, 0x81, 0xFF, 0xE1, 0xC3, 0xFC, 0x7F, 0xFF, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFE, 0x00, 0x1E, 0x00, 0x1C, 0xFD, 0xE7, 0x9E, 0x73, 0xC0, 0x1E, 0x3C, 0x1F, 0x3C, 0x01, 0xE3, 0xFF, 0xC0, 0x3F, 0xE0, 0x01, 0xE0, 0x1E, 0x01, 0xC1, 0xE1, 0xE1, 0xCF, 0x9E, 0x03, 0xE0, 0x01, 0xFE, 0x00, 0x1E, 0x00, 0x1C, 0x00, 0x01, 0xE0, 0x00, 0x1E, 0x07, 0x80, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC3, 0xC0, 0xF0, 0xF0, 0x00, 0x78, 0x0F, 0x0F, 0x03, 0xC0, 0x3C, 0x00, 0xF0, 0x78, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF7, 0xC0, 0x01, 0xE0, 0x1E, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x3C, 0x3C, 0x0F, 0x1E, 0x03, 0xC1, 0xE0, 0x78, 0x7C, 0x00, 0x07, 0x80, 0x0F, 0x03, 0xC1, 0xE1, 0xE1, 0xC7, 0x9E, 0x07, 0xF8, 0x07, 0x87, 0x80, 0x0F, 0x80, 0xFE, 0x00, 0x01, 0xE0, 0x00, 0x3F, 0xC7, 0xFC, 0x38,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x38, 0xE0, 0x07, 0xFC, 0x00, 0xF0, 0x07, 0xFE, 0x70, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x0E, 0x00, 0x1C, 0x01, 0xFF, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0x00, 0x00, 0x00, 0x07, 0x00, 0x7F, 0xE7, 0x80, 0x3C, 0x00, 0x07, 0xC0, 0x1F, 0xF0, 0x3C, 0x3C, 0x07, 0xFF, 0x87, 0xFF, 0xF0, 0x03, 0xC0, 0x0F, 0xFC, 0x0F, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x03, 0xF0, 0x0F, 0x80, 0xEF, 0x39, 0xC7, 0x87, 0x83, 0xFF, 0xE1, 0xE0, 0x00, 0x78, 0x07, 0x87, 0xFF, 0x81, 0xFF, 0xE1, 0xC3, 0xFC, 0x7F, 0xFF, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x00, 0x1E, 0x00, 0x1C, 0xF9, 0xE7, 0x9E, 0x73, 0xC0, 0x1E, 0x3F, 0xFE, 0x3C, 0x01, 0xE3, 0xFF, 0x00, 0x1F, 0xF0, 0x01, 0xE0, 0x1E, 0x01, 0xC1, 0xE1, 0xE1, 0xCF, 0xDE, 0x03, 0xF0, 0x01, 0xFC, 0x00, 0x3E, 0x00, 0x1C, 0x00, 0x01, 0xE0, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xC3, 0xC0, 0xF0, 0xF0, 0x00, 0x78, 0x0F, 0x1F, 0xFF, 0xC0, 0x3C, 0x00, 0xF0, 0x78, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x80, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x1E, 0x3C, 0x0F, 0x1E, 0x03, 0xC1, 0xC0, 0x00, 0x7F, 0x00, 0x07, 0x80, 0x0F, 0x03, 0xC1, 0xE3, 0xE1, 0xEF, 0x9E, 0x07, 0xF0, 0x07, 0x87, 0x80, 0x1F, 0x00, 0xFE, 0x00, 0x01, 0xE0, 0x00, 0x1F, 0xC7, 0xFE, 0x78,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x03, 0xFF, 0xFE, 0x01, 0xFE, 0x01, 0xEF, 0xC7, 0x9F, 0x70, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x01, 0xFF, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x7F, 0xC7, 0x80, 0x3C, 0x00, 0x0F, 0x80, 0x07, 0xF8, 0x7C, 0x3C, 0x00, 0x0F, 0x87, 0xC0, 0xF0, 0x03, 0xC0, 0x1F, 0xFE, 0x07, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x03, 0xF0, 0x0E, 0x00, 0xEF, 0x39, 0xCF, 0x87, 0x83, 0xCF, 0xF1, 0xE0, 0x00, 0x78, 0x07, 0x87, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x00, 0x1E, 0x00, 0x1C, 0xF9, 0xE7, 0x8E, 0x73, 0xC0, 0x1E, 0x3F, 0xFC, 0x3C, 0x01, 0xE3, 0xFF, 0x80, 0x03, 0xF8, 0x01, 0xE0, 0x1E, 0x01, 0xC1, 0xF3, 0xC1, 0xEF, 0xDE, 0x07, 0xF0, 0x00, 0xFC, 0x00, 0x7C, 0x00, 0x1C, 0x00, 0x00, 0xF0, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0xC3, 0xC0, 0x70, 0xF0, 0x00, 0x78, 0x0F, 0x1F, 0xFF, 0xC0, 0x3C, 0x00, 0xF8, 0xF8, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x00, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x1E, 0x3C, 0x07, 0x1E, 0x03, 0xC1, 0xC0, 0x00, 0x3F, 0xE0, 0x07, 0x80, 0x0F, 0x03, 0xC1, 0xE3, 0xC1, 0xEF, 0xDC, 0x03, 0xF0, 0x07, 0xCF, 0x00, 0x1E, 0x00, 0xFE, 0x00, 0x01, 0xE0, 0x00, 0x1F, 0xC7, 0x1F, 0xF8,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x03, 0xFF, 0xFE, 0x01, 0xFF, 0x03, 0xFF, 0xE7, 0x9F, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x01, 0xFF, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x7F, 0x07, 0x80, 0x3C, 0x00, 0x1F, 0x00, 0x00, 0x7C, 0x78, 0x3C, 0x00, 0x07, 0xC7, 0x80, 0xF0, 0x07, 0x80, 0x3E, 0x3F, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x80, 0x00, 0x00, 0x00, 0x07, 0xE0, 0x0E, 0x00, 0xEF, 0x7B, 0xCF, 0x07, 0xC3, 0xC1, 0xF1, 0xE0, 0x00, 0x78, 0x07, 0x87, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x80, 0x1E, 0x00, 0x1C, 0x71, 0xE7, 0x8F, 0x71, 0xE0, 0x1E, 0x3F, 0xF8, 0x3E, 0x01, 0xE3, 0xC7, 0xC0, 0x00, 0xFC, 0x01, 0xE0, 0x1E, 0x01, 0xC0, 0xF3, 0xC1, 0xFF, 0xDE, 0x07, 0xF8, 0x00, 0xF8, 0x00, 0x78, 0x00, 0x1C, 0x00, 0x00, 0xF0, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xC3, 0xC0, 0x70, 0xF0, 0x00, 0x78, 0x0F, 0x1F, 0xFF, 0xC0, 0x3C, 0x00, 0x7F, 0xF8, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x80, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x1E, 0x3C, 0x07, 0x1E, 0x03, 0xC1, 0xC0, 0x00, 0x1F, 0xF0, 0x07, 0x80, 0x0F, 0x03, 0xC0, 0xF3, 0xC1, 0xEF, 0xDC, 0x03, 0xF0, 0x03, 0xCF, 0x00, 0x3E, 0x00, 0x7F, 0x00, 0x01, 0xE0, 0x00, 0x3F, 0x87, 0x0F, 0xF0,
    0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x03, 0xFF, 0xFE, 0x03, 0xCF, 0x03, 0xFF, 0xEF, 0x0F, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x00, 0x7E, 0x07, 0x00, 0x3C, 0x00, 0x3E, 0x00, 0x00, 0x3C, 0xFF, 0xFF, 0x80, 0x03, 0xC3, 0x80, 0x70, 0x07, 0x80, 0x3C, 0x0F, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xC0, 0x0F, 0xFF, 0xC0, 0x0F, 0xC0, 0x0E, 0x00, 0xEE, 0x7B, 0xCF, 0xFF, 0xC3, 0xC0, 0xF1, 0xF0, 0x00, 0x78, 0x0F, 0x87, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF7, 0xC0, 0x1E, 0x00, 0x1C, 0x01, 0xE7, 0x8F, 0x71, 0xE0, 0x1E, 0x3C, 0x00, 0x1E, 0x01, 0xE3, 0xC7, 0xC0, 0x00, 0x3C, 0x01, 0xE0, 0x1E, 0x01, 0xC0, 0xF3, 0x81, 0xFD, 0xFC, 0x0F, 0x7C, 0x00, 0x78, 0x00, 0xF8, 0x00, 0x1C, 0x00, 0x00, 0xF0, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xE3, 0xC3, 0xC0, 0xF0, 0xF0, 0x00, 0x78, 0x0F, 0x1E, 0x00, 0x00, 0x3C, 0x00, 0x7F, 0xF0, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xFF, 0x80, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x1E, 0x3C, 0x0F, 0x1E, 0x03, 0xC1, 0xC0, 0x00, 0x03, 0xF8, 0x07, 0x80, 0x0F, 0x03, 0xC0, 0xF7, 0x81, 0xFF, 0xDC, 0x07, 0xF0, 0x03, 0xCE, 0x00, 0x7C, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x3C, 0x00, 0x07, 0xE0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0xE0, 0x03, 0xCF, 0x07, 0xBC, 0xEF, 0x07, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x1E, 0x00, 0x7C, 0x0F, 0x00, 0x3C, 0x00, 0x7C, 0x00, 0x00, 0x3C, 0xFF, 0xFF, 0x80, 0x03, 0xC3, 0xC0, 0x70, 0x0F, 0x00, 0x78, 0x0F, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x07, 0xE0, 0x0F, 0xFF, 0xC0, 0x1F, 0x00, 0x00, 0x00, 0xEE, 0x7B, 0x9F, 0xFF, 0xC3, 0xC0, 0xF1, 0xF0, 0x00, 0x78, 0x0F, 0x07, 0x00, 0x01, 0xE0, 0x01, 0xE0, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF3, 0xE0, 0x1E, 0x00, 0x1C, 0x01, 0xE7, 0x87, 0xF1, 0xE0, 0x3E, 0x3C, 0x00, 0x1E, 0x03, 0xE3, 0xC3, 0xE0, 0x00, 0x3C, 0x01, 0xE0, 0x1E, 0x03, 0xC0, 0xFF, 0x81, 0xFD, 0xFC, 0x1F, 0x3C, 0x00, 0x78, 0x01, 0xF0, 0x00, 0x1C, 0x00, 0x00, 0x78, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x03, 0xC3, 0xC0, 0xF0, 0xF0, 0x00, 0x78, 0x1F, 0x0E, 0x00, 0x00, 0x3C, 0x00, 0xFF, 0xE0, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF7, 0xC0, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xE0, 0x3C, 0x3C, 0x0F, 0x1E, 0x07, 0xC1, 0xC0, 0x00, 0x00, 0xF8, 0x07, 0x80, 0x0F, 0x03, 0xC0, 0xFF, 0x80, 0xFD, 0xFC, 0x0F, 0xF8, 0x01, 0xFE, 0x00, 0xF8, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x78, 0xE0, 0x03, 0xCF, 0x0F, 0xB8, 0xFF, 0x83, 0xE0, 0x00, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x07, 0x80, 0x03, 0xE0, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x3C, 0x00, 0x3C, 0x0F, 0x00, 0x3C, 0x00, 0xF8, 0x00, 0x00, 0x3C, 0xFF, 0xFF, 0x80, 0x07, 0x83, 0xC0, 0xF0, 0x0F, 0x00, 0x78, 0x0F, 0x00, 0x0F, 0x80, 0x1E, 0x00, 0x07, 0x80, 0x03, 0xF0, 0x0F, 0xFF, 0xC0, 0x3E, 0x00, 0x0E, 0x00, 0xEE, 0xFB, 0x9F, 0xFF, 0xE3, 0xC0, 0xF0, 0xF8, 0x00, 0x78, 0x1F, 0x07, 0x00, 0x01, 0xE0, 0x01, 0xF0, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x03, 0x03, 0xC0, 0xF1, 0xF0, 0x1E, 0x00, 0x3C, 0x01, 0xE7, 0x87, 0xF1, 0xF0, 0x3C, 0x3C, 0x00, 0x1F, 0x03, 0xC3, 0xC3, 0xE0, 0x00, 0x3C, 0x01, 0xE0, 0x1F, 0x03, 0xC0, 0x7F, 0x81, 0xFC, 0xFC, 0x1E, 0x3E, 0x00, 0x78, 0x01, 0xE0, 0x00, 0x1C, 0x00, 0x00, 0x78, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x07, 0xC3, 0xC0, 0xF0, 0xF8, 0x00, 0x3C, 0x3F, 0x0F, 0x00, 0x00, 0x3C, 0x00, 0xE0, 0x00, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF3, 0xE0, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF1, 0xF0, 0x3C, 0x3C, 0x0F, 0x1F, 0x0F, 0xC1, 0xC0, 0x00, 0x00, 0x78, 0x07, 0x80, 0x0F, 0x07, 0xC0, 0x7F, 0x80, 0xFD, 0xFC, 0x0F, 0xFC, 0x01, 0xFE, 0x00, 0xF0, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x78, 0xE0, 0x63, 0x9F, 0x0F, 0x3C, 0xE7, 0xC3, 0xF0, 0x00, 0x00, 0x07, 0x80, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x07, 0x80, 0x03, 0xE0, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x3C, 0x00, 0x3E, 0x1E, 0x00, 0x3C, 0x01, 0xF0, 0x00, 0x00, 0xF8, 0x00, 0x3C, 0x00, 0x0F, 0x83, 0xE1, 0xF0, 0x1E, 0x00, 0x7C, 0x1F, 0x00, 0x1F, 0x00, 0x3F, 0x00, 0x0F, 0xC0, 0x00, 0xF8, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x1F, 0x00, 0xEF, 0xFF, 0x9E, 0x01, 0xE3, 0xC1, 0xF0, 0xFC, 0x0C, 0x78, 0x3E, 0x07, 0x00, 0x01, 0xE0, 0x00, 0xF8, 0x1C, 0x78, 0x07, 0x00, 0x78, 0x03, 0x87, 0xC0, 0xF1, 0xF0, 0x1E, 0x00, 0x3C, 0x01, 0xE7, 0x83, 0xF0, 0xF8, 0x7C, 0x3C, 0x00, 0x0F, 0x87, 0xC3, 0xC1, 0xE1, 0x80, 0x7C, 0x01, 0xE0, 0x0F, 0x07, 0xC0, 0x7F, 0x01, 0xF8, 0xFC, 0x3E, 0x1F, 0x00, 0x78, 0x03, 0xE0, 0x00, 0x1C, 0x00, 0x00, 0x3C, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0xC3, 0xC1, 0xE0, 0x7C, 0x08, 0x3C, 0x7F, 0x0F, 0x80, 0x80, 0x3C, 0x00, 0xF0, 0x00, 0x3C, 0x0F, 0x00, 0x78, 0x00, 0x03, 0xC0, 0xF1, 0xF0, 0x01, 0xE0, 0x1C, 0x79, 0xE3, 0xC0, 0xF0, 0xF8, 0x7C, 0x3C, 0x1E, 0x0F, 0x1F, 0xC1, 0xC0, 0x00, 0x80, 0x78, 0x07, 0xC0, 0x0F, 0x0F, 0xC0, 0x7F, 0x00, 0xFC, 0xFC, 0x1F, 0x3E, 0x01, 0xFC, 0x01, 0xF0, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x71, 0xE0, 0x7F, 0xFE, 0x1E, 0x3F, 0xE7, 0xFF, 0xF8, 0x00, 0x00, 0x07, 0x80, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x07, 0x80, 0x03, 0xF0, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x78, 0x00, 0x1F, 0xFE, 0x0F, 0xFF, 0xC3, 0xFF, 0xF0, 0xFF, 0xF8, 0x00, 0x3C, 0x0F, 0xFF, 0x01, 0xFF, 0xE0, 0x1E, 0x00, 0x3F, 0xFF, 0x0F, 0xFF, 0x00, 0x3F, 0x00, 0x0F, 0xC0, 0x00, 0x7C, 0x00, 0x00, 0x01, 0xF8, 0x00, 0x1F, 0x00, 0xEF, 0xFF, 0x3E, 0x01, 0xE3, 0xFF, 0xE0, 0x7F, 0xFC, 0x7F, 0xFE, 0x07, 0xFF, 0x81, 0xE0, 0x00, 0x7F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x83, 0xFF, 0x80, 0xF0, 0xF8, 0x1F, 0xFF, 0x3C, 0x00, 0xE7, 0x83, 0xF0, 0xFF, 0xF8, 0x3C, 0x00, 0x0F, 0xFF, 0x83, 0xC1, 0xF1, 0xFF, 0xF8, 0x01, 0xE0, 0x0F, 0xFF, 0x80, 0x7F, 0x01, 0xF8, 0xFC, 0x7C, 0x1F, 0x00, 0x78, 0x07, 0xFF, 0xF0, 0x1C, 0x00, 0x00, 0x3C, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xC3, 0xFF, 0xE0, 0x7F, 0xF8, 0x3F, 0xFF, 0x07, 0xFF, 0x80, 0x3C, 0x00, 0xFF, 0xE0, 0x3C, 0x0F, 0x0F, 0xFF, 0xC0, 0x03, 0xC0, 0xF0, 0xF8, 0x3F, 0xFF, 0x1C, 0x79, 0xE3, 0xC0, 0xF0, 0xFF, 0xF8, 0x3F, 0xFE, 0x0F, 0xFF, 0xC1, 0xC0, 0x00, 0xFF, 0xF8, 0x07, 0xFF, 0x0F, 0xFF, 0xC0, 0x3F, 0x00, 0xF8, 0xFC, 0x3E, 0x3F, 0x00, 0xFC, 0x03, 0xFF, 0xF0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x71, 0xE0, 0x7F, 0xFE, 0x1E, 0x1F, 0xE3, 0xFF, 0xF8, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x07, 0x80, 0x03, 0xF0, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x78, 0x00, 0x1F, 0xFC, 0x0F, 0xFF, 0xC3, 0xFF, 0xF0, 0xFF, 0xF0, 0x00, 0x3C, 0x0F, 0xFE, 0x01, 0xFF, 0xE0, 0x3C, 0x00, 0x3F, 0xFE, 0x0F, 0xFC, 0x00, 0x3F, 0x00, 0x0F, 0xC0, 0x00, 0x3E, 0x00, 0x00, 0x01, 0xF0, 0x00, 0x1F, 0x00, 0xE7, 0xFE, 0x3C, 0x01, 0xF3, 0xFF, 0xE0, 0x3F, 0xFC, 0x7F, 0xFC, 0x07, 0xFF, 0x81, 0xE0, 0x00, 0x3F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x83, 0xFF, 0x80, 0xF0, 0x7C, 0x1F, 0xFF, 0x3C, 0x00, 0xE7, 0x81, 0xF0, 0x7F, 0xF0, 0x3C, 0x00, 0x07, 0xFF, 0x03, 0xC0, 0xF1, 0xFF, 0xF0, 0x01, 0xE0, 0x07, 0xFF, 0x00, 0x3F, 0x01, 0xF8, 0x7C, 0x78, 0x0F, 0x80, 0x78, 0x07, 0xFF, 0xF0, 0x1C, 0x00, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xC3, 0xFF, 0xC0, 0x3F, 0xF8, 0x1F, 0xFF, 0x07, 0xFF, 0x80, 0x3C, 0x00, 0xFF, 0xFC, 0x3C, 0x0F, 0x0F, 0xFF, 0xC0, 0x03, 0xC0, 0xF0, 0x7C, 0x3F, 0xFF, 0x1C, 0x79, 0xE3, 0xC0, 0xF0, 0x7F, 0xF0, 0x3F, 0xFC, 0x07, 0xFF, 0xC1, 0xC0, 0x00, 0xFF, 0xF0, 0x03, 0xFF, 0x07, 0xFF, 0xC0, 0x3F, 0x00, 0xF8, 0xFC, 0x7C, 0x1F, 0x00, 0xFC, 0x03, 0xFF, 0xF0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x71, 0xE0, 0x7F, 0xF8, 0x3C, 0x0F, 0xC1, 0xFF, 0x7C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x78, 0x00, 0x07, 0xF8, 0x0F, 0xFF, 0xC3, 0xFF, 0xF0, 0xFF, 0xC0, 0x00, 0x3C, 0x0F, 0xFC, 0x00, 0x7F, 0x80, 0x3C, 0x00, 0x0F, 0xFC, 0x0F, 0xF8, 0x00, 0x3E, 0x00, 0x07, 0xC0, 0x00, 0x1C, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x1F, 0x00, 0xF0, 0x00, 0x3C, 0x00, 0xF3, 0xFF, 0x80, 0x1F, 0xFC, 0x7F, 0xF0, 0x07, 0xFF, 0x81, 0xE0, 0x00, 0x1F, 0xFC, 0x78, 0x07, 0x0F, 0xFF, 0x81, 0xFE, 0x00, 0xF0, 0x3E, 0x1F, 0xFF, 0x3C, 0x00, 0xE7, 0x81, 0xF0, 0x3F, 0xE0, 0x3C, 0x00, 0x03, 0xFE, 0x03, 0xC0, 0xF9, 0xFF, 0xE0, 0x01, 0xE0, 0x03, 0xFE, 0x00, 0x3E, 0x00, 0xF0, 0x7C, 0xF8, 0x07, 0xC0, 0x78, 0x07, 0xFF, 0xF0, 0x1C, 0x00, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xFB, 0xC3, 0xFF, 0x80, 0x1F, 0xF8, 0x0F, 0xEF, 0x01, 0xFF, 0x80, 0x3C, 0x00, 0xFF, 0xFC, 0x3C, 0x0F, 0x0F, 0xFF, 0xC0, 0x03, 0xC0, 0xF0, 0x3E, 0x3F, 0xFF, 0x1C, 0x79, 0xE3, 0xC0, 0xF0, 0x3F, 0xE0, 0x3F, 0xF8, 0x03, 0xFB, 0xC1, 0xC0, 0x00, 0xFF, 0xE0, 0x01, 0xFF, 0x03, 0xFB, 0xC0, 0x3E, 0x00, 0xF8, 0x78, 0x7C, 0x0F, 0x80, 0xF8, 0x03, 0xFF, 0xF0, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x1E, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF0, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x38, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF0, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x0F, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x0F, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xE0, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x02, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x07, 0x80, 0x01, 0xE0, 0x00, 0x78, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x03, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x00, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xFF, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xE0, 0x00, 0x00, 0x00, 0x07, 0xF8, 0x01, 0xE0, 0x07, 0xF8, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x00, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xC0, 0x00, 0x00, 0x00, 0x07, 0xF8, 0x01, 0xE0, 0x07, 0xF0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF0, 0x00, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x03, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x80, 0x00, 0x00, 0x00, 0x03, 0xF8, 0x01, 0xE0, 0x07, 0xE0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

void platform_draw(speg_draw_call *draw_call, float uniformProjectionView[16])
{
  if (draw_call->count_instances == 0)
  {
    return;
  }

  speg_mesh *mesh = draw_call->mesh;

  if (!mesh->initialized)
  {
    glGenVertexArrays(1, &mesh->VAO);
    glGenBuffers(1, &mesh->VBO);
    glGenBuffers(1, &mesh->EBO);
    glGenBuffers(1, &mesh->UBO);
    glGenBuffers(1, &mesh->IBO);
    glGenBuffers(1, &mesh->CBO);

    glBindVertexArray(mesh->VAO);

    /* Vertices */
    glBindBuffer(GL_ARRAY_BUFFER, mesh->VBO);
    glBufferData(GL_ARRAY_BUFFER, mesh->verticesSize, mesh->vertices, GL_STATIC_DRAW);

    /* Incides */
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, mesh->EBO);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, mesh->indicesSize, mesh->indices, GL_STATIC_DRAW);

    /* position layout location = 0 */
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(mesh->vertices[0]), (void *)0);
    glEnableVertexAttribArray(0);

    /* Instance texture UVs */
    glBindBuffer(GL_ARRAY_BUFFER, mesh->UBO);
    glBufferData(GL_ARRAY_BUFFER, mesh->uvsSize, mesh->uvs, GL_STATIC_DRAW);
    glEnableVertexAttribArray(1);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeVec2, (void *)0);

    /* Instanced mesh */
    glBindBuffer(GL_ARRAY_BUFFER, mesh->IBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeM4x4, &draw_call->models[0], draw_call->changed ? GL_DYNAMIC_DRAW : GL_STATIC_DRAW);

    /* set attribute pointers 2 - 5 for matrix (4 times vec4) */
    for (int i = 0; i < 4; ++i)
    {
      glEnableVertexAttribArray(2 + i);
      glVertexAttribPointer(2 + i, 4, GL_FLOAT, GL_FALSE, sizeM4x4, (void *)(i * sizeof(float) * 4));
      glVertexAttribDivisor(2 + i, 1);
    }

    /* Instance color attribute (layout = 6) */
    glBindBuffer(GL_ARRAY_BUFFER, mesh->CBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeVec3, &draw_call->colors[0], draw_call->changed ? GL_DYNAMIC_DRAW : GL_STATIC_DRAW);
    glEnableVertexAttribArray(6);
    glVertexAttribPointer(6, 3, GL_FLOAT, GL_FALSE, sizeVec3, (void *)0);
    glVertexAttribDivisor(6, 1);

    /* Instance texture index (layout = 9)*/
    glGenBuffers(1, &mesh->TBO);
    glBindBuffer(GL_ARRAY_BUFFER, mesh->TBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeof(int), draw_call->texture_indices, draw_call->changed ? GL_DYNAMIC_DRAW : GL_STATIC_DRAW);
    glEnableVertexAttribArray(9);
    glVertexAttribIPointer(9, 1, GL_INT, sizeof(int), (void *)0);
    glVertexAttribDivisor(9, 1);

    glBindVertexArray(0);

    mesh->initialized = true;

    win32_print_console("[win32] mesh initialized id: %-20s, vao: %3i, vbo: %3i, ebo: %3i, ubo: %3i, ibo: %3i, cbo: %3i, tbo: %3i, face_culling: %5s, dynamic: %5s, is_2d: %5s\n", mesh->id, mesh->VAO, mesh->VBO, mesh->EBO, mesh->UBO, mesh->IBO, mesh->CBO, mesh->TBO, mesh->faceCulling ? "true" : "false", draw_call->changed ? "true" : "false", draw_call->is_2d ? "true" : "false");
  }

  /* Mesh changed */
  if (draw_call->changed)
  {
    glBindBuffer(GL_ARRAY_BUFFER, mesh->IBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeM4x4, &draw_call->models[0], GL_DYNAMIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, mesh->CBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeVec3, &draw_call->colors[0], GL_DYNAMIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, mesh->TBO);
    glBufferData(GL_ARRAY_BUFFER, draw_call->count_instances * sizeof(int), draw_call->texture_indices, GL_DYNAMIC_DRAW);
  }

  if (!initialized_gl)
  {
    glUseProgram(shaders.instanced.program);

    uniformLocationProjectionView = glGetUniformLocation(shaders.instanced.program, "pv");

    uniformLocationAtlasTexture = glGetUniformLocation(shaders.instanced.program, "atlasTexture");
    uniformLocationAtlasRows = glGetUniformLocation(shaders.instanced.program, "atlasRows");
    uniformLocationAtlasColumns = glGetUniformLocation(shaders.instanced.program, "atlasColumns");

    glGenTextures(1, &font_texture);
    glBindTexture(GL_TEXTURE_2D, font_texture);

    // You’ll need to convert the 1-bit-per-pixel format to 8-bit grayscale
    unsigned char font_data[1710 * 32];
    for (int i = 0; i < 1710 * 32; ++i)
    {
      font_data[i] = (font_atlas[i / 8] & (1 << (7 - (i % 8)))) ? 255 : 0;
    }
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, 1710, 32, 0, GL_RED, GL_UNSIGNED_BYTE, font_data);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, font_texture);

    glUniform1i(uniformLocationAtlasTexture, 0);
    glUniform1i(uniformLocationAtlasRows, 1);
    glUniform1i(uniformLocationAtlasColumns, 95);

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    initialized_gl = true;
  }

  if (!mesh->faceCulling)
  {
    glDisable(GL_CULL_FACE);
  }

  if (draw_call->is_2d)
  {
    glDisable(GL_DEPTH_TEST);
  }

  glBindVertexArray(mesh->VAO);
  glUniformMatrix4fv(uniformLocationProjectionView, 1, GL_FALSE, uniformProjectionView);
  glDrawElementsInstanced(GL_TRIANGLES, mesh->indicesCount, GL_UNSIGNED_INT, 0, draw_call->count_instances);
  glBindVertexArray(0);

  if (draw_call->is_2d)
  {
    glEnable(GL_DEPTH_TEST);
  }

  if (!mesh->faceCulling)
  {
    glEnable(GL_CULL_FACE);
  }

  drawCallsPerFrame++;
}

double platform_perf_current_time_nanoseconds(void)
{
  static LARGE_INTEGER perfCountFrequency;
  static bool time_initialized = false;

  if (!time_initialized)
  {
    QueryPerformanceFrequency(&perfCountFrequency);
    time_initialized = true;
  }

  LARGE_INTEGER counter;
  QueryPerformanceCounter(&counter);

  /* Convert the 64-bit counter value into a double for precision */
  double counterValue = (double)counter.u.HighPart * ((double)0x100000000) + (double)counter.u.LowPart;

  /* Convert the 64-bit frequency value into a double */
  double frequencyValue = (double)perfCountFrequency.u.HighPart * ((double)0x100000000) + (double)perfCountFrequency.u.LowPart;

  return (counterValue * 1000000000.0) / frequencyValue;
}

#include "stdarg.h"
void platform_print_console(const char *file, const int line, char *formatString, ...)
{
  char output[512];
  wsprintfA(output, "%s:%d ", file, line);

  va_list args;
  va_start(args, formatString);
  wvsprintfA(output + w32_strlen(output), formatString, args);
  va_end(args);

  win32_printf(output);
}

typedef struct speg_code
{
  HINSTANCE hDLL;
  FILETIME lastWriteTime;
  char *dllName;
} speg_code;

static speg_code code;

void loadCode(void)
{
  char *dllName = "speg.dll";
  const char *dllTempName = "speg_temp.dll";

  win32_print_console("[win32] load code: %s -> %s\n", dllName, dllTempName);

  if (code.hDLL != NULL)
  {
    if (!FreeLibrary(code.hDLL))
    {
      win32_print_console("[win32] cannot free library: %s\n", dllTempName);
    }
    code.hDLL = NULL;
  }

  if (!CopyFileA(dllName, dllTempName, false))
  {
    win32_print_console("[win32] cannot copy file: %s -> %s\n", dllName, dllTempName);
  }

  code.hDLL = LoadLibraryA(dllTempName);
  code.dllName = dllName;
  code.lastWriteTime = w32_file_mod_time(dllName);

  if (!code.hDLL)
  {
    return;
  }

  /* FIX for ERROR: ISO C forbids conversion of object pointer to function pointer type*/
  /* https://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html */
  *(void **)(&speg_update) = GetProcAddress(code.hDLL, "speg_update");

  assert(speg_update);
}

#define GET_X_LPARAM(lp) ((int)(short)LOWORD(lp))
#define GET_Y_LPARAM(lp) ((int)(short)HIWORD(lp))

static LRESULT W32_CALLBACK w32_window_callback(HWND window, UINT message, WPARAM wParam, LPARAM lParam)
{
  LRESULT result = 0;

  switch (message)
  {
  case WM_CLOSE:
  {
    globalRunning = false;
  }
  break;

  case WM_SIZE:
  {
    int newWidth = LOWORD((DWORD)lParam);
    int newHeight = HIWORD((DWORD)lParam);

    width = newWidth;
    height = newHeight;

    glViewport(0, 0, width, height);
  }
  break;

  case WM_SYSKEYDOWN:
  case WM_SYSKEYUP:
  case WM_KEYDOWN:
  case WM_KEYUP:
  {
    assert(1 == 0);
  }
  break;

  default:
  {
    result = DefWindowProcA(window, message, wParam, lParam);
  }
  break;
  }

  return (result);
}

void process_keyboard_message(platform_controller_state *state, bool isDown)
{
  if (state->endedDown != isDown)
  {
    state->endedDown = isDown;
    ++state->halfTransitionCount;
  }
}

static bool simulateCam = false;

void processKeyboardMessages(platform_controller_input *oldInput, platform_controller_input *newInput)
{
  /* Reset mouse offsets*/
  newInput->mouseScrollOffset = 0.0f;
  newInput->mouseXOffset = 0.0f;
  newInput->mouseYOffset = 0.0f;

  for (int i = 0; i < (int)array_size(newInput->keys); ++i)
  {
    newInput->keys[i].endedDown = oldInput->keys[i].endedDown;
    newInput->mouseAttached = oldInput->mouseAttached;
  }

  MSG message;
  while (PeekMessageA(&message, 0, 0, 0, PM_REMOVE))
  {
    switch (message.message)
    {
    case WM_INPUT:
    {
      /* Handle raw input */
      UINT dwSize = 0;
      GetRawInputData((HRAWINPUT)message.lParam, RID_INPUT, NULL, &dwSize, sizeof(RAWINPUTHEADER));

      /* Ensure the size is within our fixed buffer size */
      assert(dwSize <= 64);

      BYTE lpb[64];

      /* Get the raw input data into the fixed buffer */
      assert(GetRawInputData((HRAWINPUT)message.lParam, RID_INPUT, lpb, &dwSize, sizeof(RAWINPUTHEADER)) == dwSize);

      RAWINPUT *raw = (RAWINPUT *)lpb;

      if (raw->header.dwType == RIM_TYPEMOUSE)
      {
        newInput->mouseXOffset += (float)raw->data.mouse.lLastX;
        newInput->mouseYOffset += (float)raw->data.mouse.lLastY;
      }
    }
    break;
    case WM_MOUSEMOVE:
    {
      newInput->mousePosX = GET_X_LPARAM(message.lParam);
      oldInput->mousePosX = newInput->mousePosX;
      newInput->mousePosY = height - GET_Y_LPARAM(message.lParam);
      oldInput->mousePosY = newInput->mousePosY;
    }
    break;
    case WM_MOUSEWHEEL:
    {
      int wheelDelta = ((short)HIWORD(message.wParam));

      if (wheelDelta > 0)
      {
        newInput->mouseScrollOffset += 1.0f;
      }
      else if (wheelDelta < 0)
      {
        newInput->mouseScrollOffset -= 1.0f;
      }
    }
    break;
    case WM_SYSKEYDOWN:
    case WM_SYSKEYUP:
    case WM_KEYDOWN:
    case WM_KEYUP:
    {
      WPARAM vkCode = message.wParam;
      bool wasDown = ((message.lParam & ((uint32_t)1 << 30)) != 0);
      bool isDown = ((message.lParam & ((uint32_t)1 << 31)) == 0);

      if (wasDown != isDown)
      {
        switch (vkCode)
        {
          /* Function Keys */
          case 0x70: process_keyboard_message(&newInput->key_f1, isDown); break;
          case 0x71: process_keyboard_message(&newInput->key_f2, isDown); break;
          case 0x72: process_keyboard_message(&newInput->key_f3, isDown); break;
          case 0x73: process_keyboard_message(&newInput->key_f4, isDown); break;
          case 0x74: process_keyboard_message(&newInput->key_f5, isDown); break;
          case 0x75: process_keyboard_message(&newInput->key_f6, isDown); break;
          case 0x76: process_keyboard_message(&newInput->key_f7, isDown); break;
          case 0x77: process_keyboard_message(&newInput->key_f8, isDown); break;
          case 0x78: process_keyboard_message(&newInput->key_f9, isDown); break;
          case 0x79: process_keyboard_message(&newInput->key_f10, isDown); break;
          case 0x7A: process_keyboard_message(&newInput->key_f11, isDown); break;
          case 0x7B: process_keyboard_message(&newInput->key_f12, isDown); break;

          /* Special Keys */
          case 0x08: process_keyboard_message(&newInput->key_backspace, isDown); break;
          case 0x09: process_keyboard_message(&newInput->key_tab, isDown); break;
          case 0x0D: process_keyboard_message(&newInput->key_return, isDown); break;
          case 0x10: process_keyboard_message(&newInput->key_shift, isDown); break;
          case 0x11: process_keyboard_message(&newInput->key_control, isDown); break;
          case 0x20: process_keyboard_message(&newInput->key_space, isDown); break;

          /* Numeric */
          case '0': process_keyboard_message(&newInput->key_0, isDown); break;
          case '1': process_keyboard_message(&newInput->key_1, isDown); break;
          case '2': process_keyboard_message(&newInput->key_2, isDown); break;
          case '3': process_keyboard_message(&newInput->key_3, isDown); break;
          case '4': process_keyboard_message(&newInput->key_4, isDown); break;
          case '5': process_keyboard_message(&newInput->key_5, isDown); break;
          case '6': process_keyboard_message(&newInput->key_6, isDown); break;
          case '7': process_keyboard_message(&newInput->key_7, isDown); break;
          case '8': process_keyboard_message(&newInput->key_8, isDown); break;
          case '9': process_keyboard_message(&newInput->key_9, isDown); break;
          /* Alphanumeric */
          case 'Q': process_keyboard_message(&newInput->key_q, isDown); break;
          case 'W': process_keyboard_message(&newInput->key_w, isDown); break;
          case 'E': process_keyboard_message(&newInput->key_e, isDown); break;
          case 'R': process_keyboard_message(&newInput->key_r, isDown); break;
          case 'T': process_keyboard_message(&newInput->key_t, isDown); break;
          case 'Z': process_keyboard_message(&newInput->key_z, isDown); break;
          case 'U': process_keyboard_message(&newInput->key_u, isDown); break;
          case 'I': process_keyboard_message(&newInput->key_i, isDown); break;
          case 'O': process_keyboard_message(&newInput->key_o, isDown); break;
          case 'P': process_keyboard_message(&newInput->key_p, isDown); break;
          case 'A': process_keyboard_message(&newInput->key_a, isDown); break;
          case 'S': process_keyboard_message(&newInput->key_s, isDown); break;
          case 'D': process_keyboard_message(&newInput->key_d, isDown); break;
          case 'F': process_keyboard_message(&newInput->key_f, isDown); break;
          case 'G': process_keyboard_message(&newInput->key_g, isDown); break;
          case 'H': process_keyboard_message(&newInput->key_h, isDown); break;
          case 'J': process_keyboard_message(&newInput->key_j, isDown); break;
          case 'K': process_keyboard_message(&newInput->key_k, isDown); break;
          case 'L': process_keyboard_message(&newInput->key_l, isDown); break;
          case 'Y': process_keyboard_message(&newInput->key_y, isDown); break;
          case 'X': process_keyboard_message(&newInput->key_x, isDown); break;
          case 'C': process_keyboard_message(&newInput->key_c, isDown); break;
          case 'V': process_keyboard_message(&newInput->key_v, isDown); break;
          case 'B': process_keyboard_message(&newInput->key_b, isDown); break;
          case 'N': process_keyboard_message(&newInput->key_n, isDown); break;
          case 'M': process_keyboard_message(&newInput->key_m, isDown); break;
          default: break;
        }
      }

      if (wasDown)
      {
        if (vkCode == 'P')
        {
          globalPause = !globalPause;
        }

        else if (vkCode == VK_RETURN || vkCode == VK_ESCAPE)
        {
          globalRunning = false;
        }

        else if (vkCode == VK_F1)
        {
          wireframeMode = !wireframeMode;
          glPolygonMode(GL_FRONT_AND_BACK, wireframeMode ? GL_LINE : GL_FILL);
        }

        else if (vkCode == VK_F2)
        {
          POINT mousePoint;
          mousePoint.x = width / 2;
          mousePoint.y = height / 2;
          ClientToScreen(window, &mousePoint);
          SetCursorPos(mousePoint.x, mousePoint.y);
        }

        else if (vkCode == VK_F4)
        {
          vsync = !vsync;
          wglSwapIntervalEXT(vsync);
        }
      }

      bool altKeyWasDown = ((message.lParam & ((uint32_t)1 << 29)) != 0);

      if ((vkCode == VK_F4) && altKeyWasDown)
      {
        globalRunning = false;
      }
    }
    break;

    case WM_QUIT:
    {
      globalRunning = false;
    }
    break;

    case WM_LBUTTONDOWN:
    case WM_LBUTTONUP:
    {
      int x = GET_X_LPARAM(message.lParam);
      int y = GET_Y_LPARAM(message.lParam);

      assert(x >= 0 && y >= 0);

      RECT rect;
      GetClientRect(window, &rect);

      POINT ul;
      ul.x = rect.left;
      ul.y = rect.top;

      POINT lr;
      lr.x = rect.right;
      lr.y = rect.bottom;

      MapWindowPoints(window, 0, &ul, 1);
      MapWindowPoints(window, 0, &lr, 1);

      rect.left = ul.x;
      rect.top = ul.y;

      rect.right = lr.x;
      rect.bottom = lr.y;

      ClipCursor(&rect);
      ShowCursor(false);
      newInput->mouseAttached = true;
    }
    break;

    case WM_RBUTTONDOWN:
    case WM_RBUTTONUP:
    {
      ClipCursor(0);

      POINT mousePoint;
      mousePoint.x = width / 2;
      mousePoint.y = height / 2;
      ClientToScreen(window, &mousePoint);
      SetCursorPos(mousePoint.x, mousePoint.y);

      ShowCursor(true);
      newInput->mouseAttached = false;
    }
    break;

    default:
    {
      TranslateMessage(&message);
      DispatchMessageA(&message);
    }
    break;
    }
  }
}

#ifdef __clang__
#elif __GNUC__
__attribute((externally_visible))
#endif
#ifdef __i686__
__attribute((force_align_arg_pointer))
#endif
int
mainCRTStartup(void)
{

  HINSTANCE instance = {0};
  WNDCLASSA windowClass = {0};

  windowClass.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
  windowClass.lpfnWndProc = w32_window_callback;
  windowClass.hInstance = instance;
  windowClass.hCursor = LoadCursorA(0, IDC_ARROW);
  windowClass.lpszClassName = "win32";

  if (!RegisterClassA(&windowClass))
  {
    return 1;
  }

  /***********************/
  /*OPENGL INITIALIZATION*/
  /***********************/
  HWND fakeWND = CreateWindowExA(
      0,
      windowClass.lpszClassName,
      windowClass.lpszClassName,
      WS_CAPTION | WS_SYSMENU | WS_CLIPSIBLINGS | WS_CLIPCHILDREN,
      0, 0,
      1, 1,
      0, 0,
      instance, 0);

  if (!fakeWND)
  {
    return 1;
  }

  HDC fakeDC = GetDC(fakeWND);

  PIXELFORMATDESCRIPTOR fakePFD = {0};
  fakePFD.nSize = sizeof(fakePFD);
  fakePFD.nVersion = 1;
  fakePFD.dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
  fakePFD.iPixelType = PFD_TYPE_RGBA;
  fakePFD.cColorBits = 32;
  fakePFD.cAlphaBits = 8;
  fakePFD.cDepthBits = 24;

  const int fakePFDID = ChoosePixelFormat(fakeDC, &fakePFD);
  if (!fakePFDID)
  {
    return 1;
  }

  if (!SetPixelFormat(fakeDC, fakePFDID, &fakePFD))
  {
    return 1;
  }

  HGLRC fakeRC = wglCreateContext(fakeDC);

  if (!fakeRC)
  {
    return 1;
  }

  if (!wglMakeCurrent(fakeDC, fakeRC))
  {
    return 1;
  }

  if (!w32_gl_init_gl_functions())
  {
    return 1;
  }

  /* Find out center location of the window*/
  DWORD windowStyle = WS_CAPTION | WS_SYSMENU | WS_CLIPSIBLINGS | WS_CLIPCHILDREN | WS_MINIMIZEBOX | WS_MAXIMIZEBOX | WS_THICKFRAME;

  RECT rect = {0, 0, width, height};
  AdjustWindowRect(&rect, windowStyle, false);
  width = rect.right - rect.left;
  height = rect.bottom - rect.top;

  RECT primaryDisplaySize;
  SystemParametersInfoA(SPI_GETWORKAREA, 0, &primaryDisplaySize, 0); /* system taskbar and application desktop toolbars not included */
  int posX = (primaryDisplaySize.right - width) / 2;
  int posY = (primaryDisplaySize.bottom - height) / 2;

  window = CreateWindowExA(
      0,
      windowClass.lpszClassName,
      windowClass.lpszClassName,
      windowStyle,
      posX, posY,
      width, height,
      0, 0,
      instance, 0);

  /* Modal window */
  SetWindowPos(window, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);

  HDC dc = GetDC(window);

  const int pixelAttribs[] = {
      WGL_DRAW_TO_WINDOW_ARB, GL_TRUE,
      WGL_SUPPORT_OPENGL_ARB, GL_TRUE,
      WGL_DOUBLE_BUFFER_ARB, GL_TRUE,
      WGL_PIXEL_TYPE_ARB, WGL_TYPE_RGBA_ARB,
      WGL_ACCELERATION_ARB, WGL_FULL_ACCELERATION_ARB,
      WGL_COLOR_BITS_ARB, 32,
      WGL_ALPHA_BITS_ARB, 8,
      WGL_DEPTH_BITS_ARB, 24,
      WGL_STENCIL_BITS_ARB, 8,
      WGL_SAMPLE_BUFFERS_ARB, GL_TRUE,
      WGL_SAMPLES_ARB, 4,
      0};

  int pixelFormatID;
  UINT numFormats;
  const BOOL status = wglChoosePixelFormatARB(dc, pixelAttribs, 0, 1, &pixelFormatID, &numFormats);

  if (!status || !numFormats)
  {
    return 1;
  }

  PIXELFORMATDESCRIPTOR PFD;
  DescribePixelFormat(dc, pixelFormatID, sizeof(PFD), &PFD);
  SetPixelFormat(dc, pixelFormatID, &PFD);

  /* Open GL 3.3 specification */
  int contextAttribs[] = {
      WGL_CONTEXT_MAJOR_VERSION_ARB, 3,
      WGL_CONTEXT_MINOR_VERSION_ARB, 3,
      WGL_CONTEXT_FLAGS_ARB, WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB | WGL_CONTEXT_DEBUG_BIT_ARB,
      WGL_CONTEXT_PROFILE_MASK_ARB, WGL_CONTEXT_CORE_PROFILE_BIT_ARB,
      0};

  HGLRC rc = wglCreateContextAttribsARB(dc, 0, contextAttribs);
  if (!rc)
  {
    return 1;
  }

  wglMakeCurrent(0, 0);
  wglDeleteContext(fakeRC);
  ReleaseDC(fakeWND, fakeDC);
  DestroyWindow(fakeWND);

  if (!wglMakeCurrent(dc, rc))
  {
    return 1;
  }

  LPCSTR glRenderer = (LPCSTR)glGetString(GL_RENDERER);
  LPCSTR glVersion = (LPCSTR)glGetString(GL_VERSION);

  if (wglSwapIntervalEXT)
  {
    wglSwapIntervalEXT(vsync);
  }

  /***********************/
  /*OPENGL END */
  /***********************/
  ShowWindow(window, SW_SHOWDEFAULT);

  /* Register for raw input from the mouse */
  RAWINPUTDEVICE rid;
  rid.usUsagePage = 0x01; /* Generic desktop controls */
  rid.usUsage = 0x02;     /* Mouse */
  rid.dwFlags = 0;
  rid.hwndTarget = window;

  if (!RegisterRawInputDevices(&rid, 1, sizeof(rid)))
  {
    win32_print_console("Failed to register raw input device\n", "");
    return -1;
  }

  glEnable(GL_DEPTH_TEST);
  glEnable(GL_CULL_FACE);
  glCullFace(GL_BACK);
  glFrontFace(GL_CCW);
  glViewport(0, 0, width, height);

  loadCode();
  shader_load_all();

  /**************/
  /* Perf. Data */
  /**************/
  unsigned long lastCycleCount = w32_rdtsc();

  LARGE_INTEGER perfCountFrequency;
  QueryPerformanceFrequency(&perfCountFrequency);

  LARGE_INTEGER lastCounter;
  QueryPerformanceCounter(&lastCounter);

  POINT mousePoint;
  mousePoint.x = width / 2;
  mousePoint.y = height / 2;
  ClientToScreen(window, &mousePoint);
  SetCursorPos(mousePoint.x, mousePoint.y);

  speg_platform_api platformApi = {0};
  platformApi.platform_draw = platform_draw;
  platformApi.platform_print_console = platform_print_console;
  platformApi.platform_sleep = Sleep;
  platformApi.platform_perf_current_cycle_count = w32_rdtsc;
  platformApi.platform_perf_current_time_nanoseconds = platform_perf_current_time_nanoseconds;

  speg_memory memory = {0};
  memory.permanentMemorySize = 1024 * 1024 * 1; /* 1 MB Allocation */
  memory.permanentMemory = VirtualAlloc(0, memory.permanentMemorySize, MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);

  assert(memory.permanentMemorySize > 0);
  assert(memory.permanentMemory);

  platform_controller_input inputs[2] = {0};
  platform_controller_input *newInput = &inputs[0];
  platform_controller_input *oldInput = &inputs[1];

  HANDLE currentProc = GetCurrentProcess();

  while (globalRunning)
  {
    /*********************************/
    /* (1) HOT-Reload Code & Shaders */
    /*********************************/
    FILETIME ddlFtCurrent = w32_file_mod_time(code.dllName);

    if (CompareFileTime(&ddlFtCurrent, &code.lastWriteTime) != 0)
    {
      win32_print_console("%s", "[win32] hot reload code dll\n");
      loadCode();

      /* TODO: should not be reset */
      memory.initialized = false;
    }

    FILETIME vs = w32_file_mod_time(shaders.instanced.vsFile);
    FILETIME fs = w32_file_mod_time(shaders.instanced.fsFile);

    if (CompareFileTime(&vs, &shaders.instanced.vsTime) != 0 || CompareFileTime(&fs, &shaders.instanced.fsTime) != 0)
    {
      win32_print_console("%s", "[win32] hot reload shader files\n");
      initialized_gl = false;
      glDeleteProgram(shaders.instanced.program);
      shader_load_all();
    }

    /************************/
    /* (2) Input Processing */
    /************************/
    processKeyboardMessages(oldInput, newInput);

    /*****************/
    /* (3) Rendering */
    /*****************/
    speg_state *state = (speg_state *)memory.permanentMemory;

    if (!globalPause)
    {
      glClearColor(state->clearColorR, state->clearColorG, state->clearColorB, 1.0f);
      glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

      state->renderedObjects = 0;
      state->culledObjects = 0;
      state->dt = dt;
      state->width = width;
      state->height = height;

      drawCallsPerFrame = 0;
      occludedObjectsPerFrame = 0;

      speg_update(&memory, newInput, &platformApi);

      SwapBuffers(dc);
    }
    else
    {
      TextOutA(GetDC(window), 10, 40, "!!! PAUSE !!! (Press P to unpause)", 34);
      Sleep(1);
    }

    platform_controller_input *tmp = newInput;
    newInput = oldInput;
    oldInput = tmp;

    /******************/
    /* (4) Perf. Data */
    /******************/
    unsigned long endCycleCount = w32_rdtsc();
    LARGE_INTEGER endCounter;
    QueryPerformanceCounter(&endCounter);

    unsigned long cyclesElapsed = endCycleCount - lastCycleCount;
    LONGLONG counterElapsed = endCounter.QuadPart - lastCounter.QuadPart;
    int32_t msPerFrame = (int32_t)(((1000 * counterElapsed) / perfCountFrequency.QuadPart));
    double msPassedPerFrame = ((1000.0 * (double)counterElapsed) / (double)perfCountFrequency.QuadPart);
    LONGLONG fps = perfCountFrequency.QuadPart / (counterElapsed == 0 ? 1 : counterElapsed);

    dt = ((double)(counterElapsed) / (double)perfCountFrequency.QuadPart);

    lastCounter = endCounter;
    lastCycleCount = endCycleCount;

    /*****************/
    /* (5) Debugging */
    /*****************/
    static double msPassed = 0;
    msPassed += msPassedPerFrame;

    /* Every second */
    if (msPassed >= 1000.0)
    {
      char buffer[256];
      unsigned long handleCount;
      unsigned long memoryKb;
      PROCESS_MEMORY_COUNTERS_EX memoryStats;

      GetProcessHandleCount(currentProc, &handleCount);
      K32GetProcessMemoryInfo(currentProc, &memoryStats, sizeof(memoryStats));

      memoryKb = (unsigned long)(memoryStats.PrivateUsage / 1024);

      wsprintfA(buffer, "%4d ms/f, %4d fps, %10d cycles, size: %4d / %4d, %s, %s\n", msPerFrame, fps, cyclesElapsed, width, height, glRenderer, glVersion);
      SetWindowTextA(window, buffer);
      win32_print_console("[win32] objs: %4d, culled: %4d, occlu: %4d, dc/f: %4d, %4d ms/f, %5d fps, %10d cycles, %4lu handles, %lu kb, wiref(F1) %1d, simCam(F3) %1d, vsync(F4) %1d\n", state->renderedObjects, state->culledObjects, occludedObjectsPerFrame, drawCallsPerFrame, msPerFrame, fps, cyclesElapsed, handleCount, memoryKb, wireframeMode, simulateCam, vsync);
      msPassed = 0;
    }
  }

  ExitProcess(0);
  return 0;
}

/*
   ------------------------------------------------------------------------------
   This software is available under 2 licenses -- choose whichever you prefer.
   ------------------------------------------------------------------------------
   ALTERNATIVE A - MIT License
   Copyright (c) 2025 nickscha
   Permission is hereby granted, free of charge, to any person obtaining a copy of
   this software and associated documentation files (the "Software"), to deal in
   the Software without restriction, including without limitation the rights to
   use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
   of the Software, and to permit persons to whom the Software is furnished to do
   so, subject to the following conditions:
   The above copyright notice and this permission notice shall be included in all
   copies or substantial portions of the Software.
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   SOFTWARE.
   ------------------------------------------------------------------------------
   ALTERNATIVE B - Public Domain (www.unlicense.org)
   This is free and unencumbered software released into the public domain.
   Anyone is free to copy, modify, publish, use, compile, sell, or distribute this
   software, either in source code form or as a compiled binary, for any purpose,
   commercial or non-commercial, and by any means.
   In jurisdictions that recognize copyright laws, the author or authors of this
   software dedicate any and all copyright interest in the software to the public
   domain. We make this dedication for the benefit of the public at large and to
   the detriment of our heirs and successors. We intend this dedication to be an
   overt act of relinquishment in perpetuity of all present and future rights to
   this software under copyright law.
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
   ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   ------------------------------------------------------------------------------
*/
